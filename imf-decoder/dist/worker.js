(()=>{"use strict";var e={413:(e,n,t)=>{e.exports=t.p+"2ea95ac09483f74dc50b.wasm"}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return e[r](i,i.exports,t),i.exports}let r;t.m=e,t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href;const o="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&o.decode();let i=null;function _(){return null!==i&&0!==i.byteLength||(i=new Uint8Array(r.memory.buffer)),i}function c(e,n){return e>>>=0,o.decode(_().subarray(e,e+n))}function s(e){return null==e}let a=null;function f(){return(null===a||!0===a.buffer.detached||void 0===a.buffer.detached&&a.buffer!==r.memory.buffer)&&(a=new DataView(r.memory.buffer)),a}let u=0;const b="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},g="function"==typeof b.encodeInto?function(e,n){return b.encodeInto(e,n)}:function(e,n){const t=b.encode(e);return n.set(t),{read:e.length,written:t.length}};function d(e,n,t){if(void 0===t){const t=b.encode(e),r=n(t.length,1)>>>0;return _().subarray(r,r+t.length).set(t),u=t.length,r}let r=e.length,o=n(r,1)>>>0;const i=_();let c=0;for(;c<r;c++){const n=e.charCodeAt(c);if(n>127)break;i[o+c]=n}if(c!==r){0!==c&&(e=e.slice(c)),o=t(o,r,r=c+3*e.length,1)>>>0;const n=_().subarray(o+c,o+r);c+=g(e,n).written,o=t(o,r,c,1)>>>0}return u=c,o}function l(e){const n=typeof e;if("number"==n||"boolean"==n||null==e)return`${e}`;if("string"==n)return`"${e}"`;if("symbol"==n){const n=e.description;return null==n?"Symbol":`Symbol(${n})`}if("function"==n){const n=e.name;return"string"==typeof n&&n.length>0?`Function(${n})`:"Function"}if(Array.isArray(e)){const n=e.length;let t="[";n>0&&(t+=l(e[0]));for(let r=1;r<n;r++)t+=", "+l(e[r]);return t+="]",t}const t=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(t.length>1))return toString.call(e);if(r=t[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}const w="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>{r.__wbindgen_export_3.get(e.dtor)(e.a,e.b)}));function p(e,n){r._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h1717a7bd06f4f655(e,n)}function y(e){const n=r.__wbindgen_export_2.get(e);return r.__externref_table_dealloc(e),n}let h=null,m=null;function v(e){const n=r.__externref_table_alloc();return r.__wbindgen_export_2.set(n,e),n}function I(e,n){try{return e.apply(this,n)}catch(e){const n=v(e);r.__wbindgen_exn_store(n)}}function R(e){return()=>{throw new Error(`${e} is not defined`)}}const x="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_imfdecoder_free(e>>>0,1)));class D{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,x.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_imfdecoder_free(e,0)}constructor(e,n){const t=r.imfdecoder_new(e,n);if(t[2])throw y(t[1]);return this.__wbg_ptr=t[0]>>>0,x.register(this,this.__wbg_ptr,this),this}start_player_loop(){const e=r.imfdecoder_start_player_loop(this.__wbg_ptr);if(e[1])throw y(e[0])}stop_player_loop(){r.imfdecoder_stop_player_loop(this.__wbg_ptr)}get diagnostic_mode(){return 0!==r.imfdecoder_diagnostic_mode(this.__wbg_ptr)}set diagnostic_mode(e){r.imfdecoder_set_diagnostic_mode(this.__wbg_ptr,e)}set_reference_data(e){let n,t;try{const _=r.imfdecoder_set_reference_data(this.__wbg_ptr,e);var o=_[0],i=_[1];if(_[3])throw o=0,i=0,y(_[2]);return n=o,t=i,c(o,i)}finally{r.__wbindgen_free(n,t,1)}}process_tokens(e){let n,t;try{const _=r.imfdecoder_process_tokens(this.__wbg_ptr,e);var o=_[0],i=_[1];if(_[3])throw o=0,i=0,y(_[2]);return n=o,t=i,c(o,i)}finally{r.__wbindgen_free(n,t,1)}}process_batch(){let e,n;try{const i=r.imfdecoder_process_batch(this.__wbg_ptr);var t=i[0],o=i[1];if(i[3])throw t=0,o=0,y(i[2]);return e=t,n=o,c(t,o)}finally{r.__wbindgen_free(e,n,1)}}get_reference_status(){let e,n;try{const t=r.imfdecoder_get_reference_status(this.__wbg_ptr);return e=t[0],n=t[1],c(t[0],t[1])}finally{r.__wbindgen_free(e,n,1)}}}function A(){const e={wbg:{}};return e.wbg.__wbindgen_cb_drop=function(e){const n=e.original;return 1==n.cnt--&&(n.a=0,!0)},e.wbg.__wbindgen_string_new=function(e,n){return c(e,n)},e.wbg.__wbindgen_number_get=function(e,n){const t="number"==typeof n?n:void 0;f().setFloat64(e+8,s(t)?0:t,!0),f().setInt32(e+0,!s(t),!0)},e.wbg.__wbindgen_is_bigint=function(e){return"bigint"==typeof e},e.wbg.__wbindgen_bigint_from_u64=function(e){return BigInt.asUintN(64,e)},e.wbg.__wbindgen_jsval_eq=function(e,n){return e===n},e.wbg.__wbindgen_error_new=function(e,n){return new Error(c(e,n))},e.wbg.__wbindgen_is_object=function(e){return"object"==typeof e&&null!==e},e.wbg.__wbindgen_is_undefined=function(e){return void 0===e},e.wbg.__wbindgen_in=function(e,n){return e in n},e.wbg.__wbindgen_jsval_loose_eq=function(e,n){return e==n},e.wbg.__wbindgen_boolean_get=function(e){return"boolean"==typeof e?e?1:0:2},e.wbg.__wbindgen_string_get=function(e,n){const t="string"==typeof n?n:void 0;var o=s(t)?0:d(t,r.__wbindgen_malloc,r.__wbindgen_realloc),i=u;f().setInt32(e+4,i,!0),f().setInt32(e+0,o,!0)},e.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(e,n){return e[n]},e.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},e.wbg.__wbg_stack_658279fe44541cf6=function(e,n){const t=d(n.stack,r.__wbindgen_malloc,r.__wbindgen_realloc),o=u;f().setInt32(e+4,o,!0),f().setInt32(e+0,t,!0)},e.wbg.__wbg_error_f851667af71bcfc6=function(e,n){let t,o;try{t=e,o=n,console.error(c(e,n))}finally{r.__wbindgen_free(t,o,1)}},e.wbg.__wbg_instanceof_Window_6575cd7f1322f82f=function(e){let n;try{n=e instanceof Window}catch(e){n=!1}return n},e.wbg.__wbg_performance_8efa15a3e0d18099=function(e){const n=e.performance;return s(n)?0:v(n)},e.wbg.__wbg_cancelAnimationFrame_f802bc3f3a9b2e5c=function(){return I((function(e,n){e.cancelAnimationFrame(n)}),arguments)},e.wbg.__wbg_requestAnimationFrame_8c3436f4ac89bc48=function(){return I((function(e,n){return e.requestAnimationFrame(n)}),arguments)},e.wbg.__wbg_now_d3cbc9581625f686=function(e){return e.now()},e.wbg.__wbg_debug_a0b6c2c5ac9a4bfd="function"==typeof console.debug?console.debug:R("console.debug"),e.wbg.__wbg_error_53abcd6a461f73d8="function"==typeof console.error?console.error:R("console.error"),e.wbg.__wbg_error_4d17c5bb1ca90c94="function"==typeof console.error?console.error:R("console.error"),e.wbg.__wbg_info_1c7fba7da21072d1="function"==typeof console.info?console.info:R("console.info"),e.wbg.__wbg_log_4de37a0274d94769="function"==typeof console.log?console.log:R("console.log"),e.wbg.__wbg_warn_2e2787d40aad9a81="function"==typeof console.warn?console.warn:R("console.warn"),e.wbg.__wbg_get_5419cf6b954aa11d=function(e,n){return e[n>>>0]},e.wbg.__wbg_length_f217bbbf7e8e4df4=function(e){return e.length},e.wbg.__wbindgen_is_function=function(e){return"function"==typeof e},e.wbg.__wbg_newnoargs_1ede4bf2ebbaaf43=function(e,n){return new Function(c(e,n))},e.wbg.__wbg_next_13b477da1eaa3897=function(e){return e.next},e.wbg.__wbg_next_b06e115d1b01e10b=function(){return I((function(e){return e.next()}),arguments)},e.wbg.__wbg_done_983b5ffcaec8c583=function(e){return e.done},e.wbg.__wbg_value_2ab8a198c834c26a=function(e){return e.value},e.wbg.__wbg_iterator_695d699a44d6234c=function(){return Symbol.iterator},e.wbg.__wbg_get_ef828680c64da212=function(){return I((function(e,n){return Reflect.get(e,n)}),arguments)},e.wbg.__wbg_call_a9ef466721e824f2=function(){return I((function(e,n){return e.call(n)}),arguments)},e.wbg.__wbg_self_bf91bf94d9e04084=function(){return I((function(){return self.self}),arguments)},e.wbg.__wbg_window_52dd9f07d03fd5f8=function(){return I((function(){return window.window}),arguments)},e.wbg.__wbg_globalThis_05c129bf37fcf1be=function(){return I((function(){return globalThis.globalThis}),arguments)},e.wbg.__wbg_global_3eca19bb09e9c484=function(){return I((function(){return global.global}),arguments)},e.wbg.__wbg_isArray_6f3b47f09adb61b5=function(e){return Array.isArray(e)},e.wbg.__wbg_instanceof_ArrayBuffer_74945570b4a62ec7=function(e){let n;try{n=e instanceof ArrayBuffer}catch(e){n=!1}return n},e.wbg.__wbg_isSafeInteger_b9dff570f01a9100=function(e){return Number.isSafeInteger(e)},e.wbg.__wbg_buffer_ccaed51a635d8a2d=function(e){return e.buffer},e.wbg.__wbg_new_fec2611eb9180f95=function(e){return new Uint8Array(e)},e.wbg.__wbg_set_ec2fcf81bc573fd9=function(e,n,t){e.set(n,t>>>0)},e.wbg.__wbg_length_9254c4bd3b9f23c4=function(e){return e.length},e.wbg.__wbg_instanceof_Uint8Array_df0761410414ef36=function(e){let n;try{n=e instanceof Uint8Array}catch(e){n=!1}return n},e.wbg.__wbindgen_bigint_get_as_i64=function(e,n){const t="bigint"==typeof n?n:void 0;f().setBigInt64(e+8,s(t)?BigInt(0):t,!0),f().setInt32(e+0,!s(t),!0)},e.wbg.__wbindgen_debug_string=function(e,n){const t=d(l(n),r.__wbindgen_malloc,r.__wbindgen_realloc),o=u;f().setInt32(e+4,o,!0),f().setInt32(e+0,t,!0)},e.wbg.__wbindgen_throw=function(e,n){throw new Error(c(e,n))},e.wbg.__wbindgen_memory=function(){return r.memory},e.wbg.__wbindgen_closure_wrapper128=function(e,n,t){const o=function(e,n,t,o){const i={a:e,b:n,cnt:1,dtor:19},_=(...e)=>{i.cnt++;const n=i.a;i.a=0;try{return o(n,i.b,...e)}finally{0==--i.cnt?(r.__wbindgen_export_3.get(i.dtor)(n,i.b),w.unregister(i)):i.a=n}};return _.original=i,w.register(_,i,i),_}(e,n,0,p);return o},e.wbg.__wbindgen_init_externref_table=function(){const e=r.__wbindgen_export_2,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},e}async function P(e){if(void 0!==r)return r;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module_or_path:e}=e):console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===e&&(e=new URL(t(413),t.b));const n=A();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:o,module:_}=await async function(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}(await e,n);return function(e,n){return r=e.exports,P.__wbindgen_wasm_module=n,a=null,h=null,m=null,i=null,r.__wbindgen_start(),r}(o,_)}"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((e=>r.__wbg_tensor_free(e>>>0,1)));const E=P;var F,T,S;!function(e){e[e.Idle=0]="Idle",e[e.Ready=1]="Ready",e[e.Playing=2]="Playing",e[e.Pause=3]="Pause",e[e.Destroyed=4]="Destroyed"}(F||(F={})),function(e){e[e.Idle=0]="Idle",e[e.Initializing=1]="Initializing",e[e.Ready=2]="Ready",e[e.Open=3]="Open",e[e.Pause=4]="Pause",e[e.Closed=5]="Closed"}(T||(T={})),function(e){e.DecoderInit="DecoderInit",e.DecoderInited="DecoderInited",e.ProcessFrame="ProcessFrame",e.FrameProcessed="FrameProcessed",e.UpdateRenderPass="UpdateRenderPass",e.DecoderError="DecoderError",e.DecoderRecovered="DecoderRecovered",e.DecoderMetrics="DecoderMetrics",e.DecoderCreated="DecoderCreated",e.WasmLoaded="WasmLoaded",e.DecoderReady="DecoderReady",e.ReferenceDataSet="ReferenceDataSet",e.TokensProcessed="TokensProcessed",e.BatchProcessed="BatchProcessed",e.Error="Error"}(S||(S={}));const k=new class{constructor(){this.decoder=null,this.status=T.Idle}async initialize(){try{await E(),this.decoder=new D(1920,1080),this.status=T.Ready,self.postMessage({type:S.DecoderCreated})}catch(e){self.postMessage({type:S.Error,error:e instanceof Error?e.message:String(e)})}}handleMessage(e){const{type:n,data:t}=e.data;try{switch(n){case S.DecoderInit:this.initialize();break;case S.TokensProcessed:this.processTokens(t)}}catch(e){self.postMessage({type:S.Error,error:e instanceof Error?e.message:String(e)})}}async processTokens(e){if(!this.decoder||this.status!==T.Ready)throw new Error("Decoder not ready");const n=await this.decoder.process_tokens(e);self.postMessage({type:S.TokensProcessed,result:n});const t=await this.decoder.process_batch();self.postMessage({type:S.BatchProcessed,result:t})}};self.onmessage=e=>k.handleMessage(e)})();